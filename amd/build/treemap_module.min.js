define(function(t,e){let la=null;const oa=8230,sa="&#"+oa.toString()+";";let da="",ca=null,ha=null,pa=null,ua=null,fa=null,ga=null,xa=null;async function r(){var t=document.getElementById(ha).clientWidth;let l=t;if(0===l)return;const Y=.9*window.innerHeight;let o=Y,D=(o=600,l>o),s=t<1100,R=.57;let X=function(){let t=!1;{var e;"maxTouchPoints"in navigator?t=0<navigator.maxTouchPoints:"msMaxTouchPoints"in navigator?t=0<navigator.msMaxTouchPoints:(e=window.matchMedia&&matchMedia("(pointer:coarse)"))&&"(pointer:coarse)"===e.media?t=!!e.matches:"orientation"in window&&(t=!0)}return t}();const j="treemapColorscheme";let O=["Rainbow","Plasma","Warm","Cool","Reds","Greens","Blues","RdBu","RdGy","protanopia","grayscaleLight","PuOr","deuteranopia","grayscaleDark","grayscaleMiddle"],q={protanopia:["#D1D0DE","#BDB6AB","#636D97"],deuteranopia:["#C59434","#6F7498","#092C48"],grayscaleLight:["#ddd","#eaeaea"],grayscaleDark:["#050505","#030303"],grayscaleMiddle:["#ddd","#030303"]},G=["PuOr","deuteranopia","grayscaleDark","grayscaleMiddle"],d=la.scaleOrdinal(la.quantize(function(){let t=localStorage.getItem(j),e="";if(t)try{t=JSON.parse(t),ha in t&&O.includes(t[ha])||(t[ha]="Rainbow",localStorage.setItem(j,JSON.stringify(t))),e=t[ha]}catch(t){e="Rainbow"}else{e="Rainbow";var a={};a[ha]=e,localStorage.setItem(j,JSON.stringify(a))}let r=null;r=e in q?la.interpolateRgbBasis(q[e]):la["interpolate"+e];return r}(),ca.children.length+2)),v=!1,K=!1,_=750,F=!1,H=!1,J=13,a=0,V=s?.5:2,W=!1,U=!0,{numberOfTopics:Z,highestNumberChildren:Q}=function(t){var e=t.children.length??0;let a=0;return 0!==e&&(t.children.forEach(t=>{t.children.length>a&&(a=t.children.length)}),a+=1),{numberOfTopics:e,highestNumberChildren:a}}(ca);o=Math.max(Z*(Q-1)*26,Y);const c=(t=>{t=la.hierarchy(t).each(e=>{e.children&&!e.children[0].children&&e.children.forEach(t=>{t.siblingsCount=e.children.length})}).sum(t=>t.children?Q-t.children.length:1);return t.value=Q*t.children.length,la.partition().size([o,(t.height+1)*l/3]).padding(.7)(t)})(ua),tt=(da=c.data.name,"M6,6 L26,26 M6,26 L26,6"),et=la.create("svg:svg").attr("aria-labelledby","vis-title").attr("class","mainSvg").style("z-index",0).attr("viewBox",[0,0,l,o]);la.select("#"+ha).append(()=>et.node()),et.append("title").classed("vis-title",!0);var t=et,t=((t=t.append("svg:defs").append("svg:linearGradient").attr("id","gradient-"+ha).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","100%")).append("svg:stop").style("offset","0%").style("stop-color","#eee"),t.append("svg:stop").style("offset","100%").style("stop-color","#ddd"),et.append("text").text("100%")),e=la.select(la.select(t).node()._groups[0]).node()[0].getComputedTextLength();let h=Math.min(Math.max(ka(c.children[0])/6,2*e/3),Math.min(30,ka(c.children[0])/2.5)),b=(t.remove(),.5*h),$=2*h,at=.8*h,rt=2*at,nt="1px 1px 1px",p=function(r,n){r.y1/=7,50<r.y1-r.y0&&(r.y1=r.y0+50);let i=0;return r.each(t=>{var e,a;0===t.depth?t.x1+=.1:1===t.depth?(e=t.y0,t.y0=r.y1+.7,t.y1-=e-t.y0,300<t.y1-t.y0&&(t.y1=t.y0+300),t.tabindex=(5*t.value+1)*t.parent.children.indexOf(t)+2):(t.y0=t.parent.y1+.7,t.y1-=300,Ma(t)<=0&&(t.y1=t.y0+1),e=(t.parent.x1-t.parent.x0-.5*(t.siblingsCount-1))/t.siblingsCount,a=t.parent.children.indexOf(t),t.x0=t.parent.x0+a*e+.5*a,t.x1=t.x0+e,t.proY0=t.y1-t.y0,t.proY1=t.proY0+(t.parent.x1-t.parent.x0-.5*(t.siblingsCount-1))/n,t.proX0=(t.x1-t.x0-(t.proY1-t.proY0))/2,t.proX1=t.proX0+(t.proY1-t.proY0),i=t.y1+t.proY1-t.proY0)}),i}(c,Q),it=c.children[0],u=function(e){if(e.children&&e.children.length)for(let t=0;t<e.children.length;t++)if(e.children[t].children&&e.children[t].children.length)return e.children[t].children[0];return null}(c),lt=(s&&u&&c.each(t=>{1==t.depth&&(t.y1=u.y1)}),Ma(it)),ot=Ma(u)??1,{linkContainerSize:st,linkIconSize:dt}=function(){let t=Math.min(Math.min(3*h/2,30),ka(it)/3.5),e=.75*t;s&&D&&(t*=1.5,e*=1.5);return{linkContainerSize:t,linkIconSize:e}}(),ct=!1,ht=null,r=null,f=null,g=function(t,e,a,r){let n=t?Math.min(4,86/N(t)):0;e&&a&&r&&(n*=1.5);return n}(u,D,s,X),pt=u?Math.min(N(u),20.13):0,ut=u?Math.min(N(u)/1.5,16):0,n=(p=u?u.y1+N(u):it.y1,function(t,e,a,r){let n=25;t&&!e?n=(r-a)/8:t&&(n=(r-a)/14);return Math.max(n,0)}(s,D,p,l)),i=n,x=n/2+3;var ft=s?10:25;let y=ft/3,m=(e=s,t=l,Mt=p,Ct=y,k=ca,Bt=i,e?7:Math.min((.7*(t-Mt)-2*Ct)/(k.children.length+1),Bt*Math.sqrt(2)-2*Ct)),gt=m,w=m+2*y,M=m*(ca.children.length+1)+2*y,xt=x+2*i+(w+10)*(O.length-1)+w+5*n>o,yt=!0,mt=.7;for(;xt&&yt&&.1<=mt;)x=n/2+3,ft=13,y=13/3,m=Math.max(Math.min(((l-p)*mt-2*y)/(ca.children.length+1),i*Math.sqrt(2)-2*y),1),gt=m,w=m+2*y,M=m*(ca.children.length+1)+2*y,xt=x+2*i+(w+10)*(O.length-1)+w+5*n>o,yt=p>(l-p)/4+p-M/2,mt-=.1;let vt=[];O.forEach((t,e)=>vt.push({index:e,colorscheme:t,colorblind:G.includes(t)}));e=et.append("g"),t=e.append("g").attr("transform",`translate(0,${5*n})`).classed("colorSchemePicker",!0).attr("aria-hidden",!0);let bt=t.append("g").classed("colorSchemesContainer",!0).selectAll(null).data(vt).join("svg").attr("x",(l-p-M)/2+p).attr("y",x+n/2-w/2).attr("width",M).attr("height",w).attr("viewBox",`0 0 ${M} ${w} `).style("fill",t=>t.colorblind?"#383866":`url(#gradient-${ha})`).style("cursor","pointer").style("filter",`drop-shadow(${nt} rgba(0,0,0,0.5))`).on("click",(a,r)=>{{var n=a;a=r.colorscheme,n.preventDefault();let t;try{t=(t=localStorage.getItem(j))?JSON.parse(t):{}}catch(n){t={}}t[ha]=a,localStorage.setItem(j,JSON.stringify(t));let e=null;e=a in q?la.interpolateRgbBasis(q[a]):la["interpolate"+a],d=la.scaleOrdinal(la.quantize(e,ca.children.length+2)),a=la.transition().duration(300),B.transition(a).attr("fill",t=>{if(t.depth)for(;1<t.depth;)t=t.parent;return d(t.data.name)}),Lt.transition(a).attr("fill",t=>d(t.parent.data.name)),re.transition(a).attr("fill",t=>d((1<t.depth?t.parent:t).data.name)),re.style("filter",t=>{t=$a(d((1===t.depth?t:t.parent).data.name));return t.push(.8),`drop-shadow(${nt} ${wa(t)})`}),ne.transition(a).attr("stroke",t=>T(t,.7,!0)).attr("stroke-opacity",t=>"white"===T(t,.7,!0)?1:.5),Ft.transition(a).attr("fill",t=>d(t.parent.data.name)),Jt.transition(a).attr("fill",t=>T(t,1,!1)),Gt.transition(a).attr("fill",t=>d(t.parent.data.name,1,!1)),Xt.transition(a).attr("fill",t=>d(t.parent.data.name,1,!1)),Ot.transition(a).attr("stroke",t=>T(t,1,!1)),_t.transition(a).attr("stroke",t=>T(t,1,!1)),Ut.style("filter",t=>{t=$a(d(t.data.name));return t.push(.8),`drop-shadow(${nt} ${wa(t)})`}),Ut.transition(a).attr("stroke",t=>ba(d(t.data.name),"black",.8,!0)).attr("fill",t=>{var e=ba(d(t.data.name),"white",.6);return ba(d(t.data.name),e,.4,!0)}),Zt.transition(a).attr("fill",t=>ba(d(t.data.name),"black",.94,!0)),te.transition(a).attr("stroke",t=>ba(d(t.data.name),"black",.8,!0)).attr("fill",t=>ba(d(t.data.name),"white",.6,!0)),ee.transition(a).attr("fill",t=>T(t,.6,!1)),P.transition(a).attr("fill",t=>T(t,.6,2===t.depth))}}),$t=bt.append("path").attr("d",ke(M,w,m+2*y,w,y)),wt=bt.selectAll(null).data(t=>{{var n=t.colorscheme,i=t.index;let e,a=ca.children.length+2,r=null;r=n in q?la.interpolateRgbBasis(q[n]):la["interpolate"+n],e=[];for(let t=0;t<a-1;++t){var l=ba($a(r(t/(a-1))),"white",.6,!0);e.push({index:t,parentIndex:i,colorscheme:n,color:la.rgb(l).hex()})}return e}}).join("rect").attr("y",(w-gt)/2).attr("x",(M-m)/2).attr("height",gt).attr("width",m).style("fill",t=>t.color);var Mt=t.append("g").classed("colorPaletteIconG",!0);let kt=Mt.append("circle").style("filter",`drop-shadow(${nt} rgba(0,0,0,0.5))`).attr("cx",(l-p)/2+p).attr("cy",x+n/2).attr("r",i).style("cursor","pointer").style("fill",`url(#gradient-${ha})`).on("click",Me);var k=Mt.append("svg").attr("x",(l-p-n)/2+p).attr("y",x).attr("width",n).attr("height",n).attr("viewBox","0 0 512 512").style("cursor","pointer").style("fill","rgb(40, 40, 40)").on("click",Me),Bt=(k.append("path").attr("d","M491.514,148.498c27.293-27.293,27.293-71.701,0-98.994L442.017,0.007l-43.382,43.382 C356.067,14.713,306.619-0.279,254.762,0.004C114.059,0.68-0.22,115.717,0.017,256.44c0.115,68.288,26.794,132.471,75.125,180.724 c48.335,48.26,112.571,74.837,180.875,74.837c13.478,0,27.011-1.059,40.224-3.146c20.168-3.188,37.24-15.365,46.838-33.411 c9.753-18.337,10.29-39.698,1.471-58.605c-9.644-20.677-14.533-42.827-14.533-65.837c0-29.521,8.28-58.253,23.945-83.089 c11.303-17.92,26.072-33.28,43.344-45.235l8.777,254.863l0.008,0.19c0.906,19.217,16.687,34.27,35.926,34.27 c19.239,0,35.02-15.054,35.926-34.27l8.904-258.531c3.239-4.215,5.17-9.484,5.17-15.199v-40c0-4.636-1.273-8.979-3.482-12.705 C489.549,150.392,490.547,149.466,491.514,148.498z M392.017,164.001v26.484c-25.685,15.062-47.458,36.102-63.429,61.423 c-18.691,29.634-28.571,63.899-28.571,99.093c0,27.424,5.835,53.841,17.345,78.517c4.8,10.291,4.519,21.896-0.769,31.839 c-5.133,9.65-14.258,16.162-25.035,17.865c-11.669,1.845-23.627,2.779-35.541,2.779c-60.299,0-117.007-23.463-159.679-66.066 c-42.666-42.599-66.219-99.26-66.321-159.545C29.808,132.156,130.693,30.601,254.906,30.004 c44.89-0.212,87.796,12.497,124.892,36.882c-5.077,9.81-7.781,20.752-7.781,32.115c0,18.698,7.282,36.276,20.503,49.497 c0.968,0.968,1.966,1.894,2.979,2.798C393.29,155.022,392.017,159.365,392.017,164.001z M447.972,476.381 c-0.182,3.156-2.786,5.62-5.956,5.62s-5.773-2.464-5.956-5.62l-8.519-247.38h28.949L447.972,476.381z M462.017,199.001h-40v-30h40 V199.001z M470.3,127.285c-7.555,7.556-17.6,11.716-28.284,11.716c-10.684,0-20.729-4.16-28.284-11.716h-0.001 c-15.596-15.596-15.596-40.973,0-56.568l28.285-28.284l28.285,28.284c7.555,7.555,11.715,17.6,11.715,28.284    C482.016,109.685,477.856,119.73,470.3,127.285z"),Be(k,238,74,45,2),Be(k,124,263,45,2),Be(k,145,143,45,2),Be(k,211,346,45,2),e.append("g").classed("zoomIconG",!0).attr("transform",`translate(${(l-p)/2+p-n},${2.5*n})`).on("click",null)),Ct=(Bt.append("circle").attr("cx",n).attr("cy",n).attr("r",i).style("filter",`drop-shadow(${nt} rgba(0,0,0,0.5))`).style("fill",`url(#gradient-${ha})`),Bt.append("svg").attr("viewBox","0 0 100 100").attr("height",2*n).attr("width",2*n).attr("x",0).attr("y",0).classed("zoomHalvesContainer",!0)),t=Ct.append("svg").classed("zoomLeftHalf",!0).style("cursor","pointer").on("click",ra);let It=t.append("path").attr("d","M 50,1 a 49 49 0 0 0 0,98 a 99999 9999  0 0 0 0,-98  z").style("fill",`url(#gradient-${ha})`),Pt=(t.append("path").attr("d","M 17,50  h 20").classed("zoom-half-svg",!0),Ct.append("svg").style("cursor","pointer").classed("zoomRightHalf",!0).on("click",aa)),St=Pt.append("path").attr("d","M 50,1 a 49 49 0 0 1 0,98 a 99999 9999  0 0 1 0,-98  z").style("fill",`url(#gradient-${ha})`),Tt=(Pt.append("path").attr("d","M 63, 50 h 20 M 73,40  v 20 ").classed("zoom-half-svg",!0),Ct.append("path").attr("d","M 50,1 v 98").classed("zoom-bg",!0),e.append("g").classed("accessibilityIcon",!0).on("click",Ve));Mt=l-p-10;let zt=Tt.append("circle").attr("cx",(l-p)/2+p).attr("cy",x+n/2).attr("r",i).style("filter",`drop-shadow(${nt} rgba(0,0,0,0.5))`).style("cursor","pointer").style("fill",`url(#gradient-${ha})`);k=Tt.append("svg").attr("x",(l-p-n)/2+p).attr("y",x).attr("width",n).attr("height",n).attr("viewBox","0 0 100 100").classed("accessibility-icon",!0);k.append("path").attr("d","M50,35L50,40A90,90 0 0 1 35,95M50,40A90,90 1 0 0 65,95 M50,35 A 100,100 1 0 0 85,20M50,35 A 100,100 0 0 1 15,20"),k.append("circle").attr("cx",50).attr("cy",10).attr("r",5);const At=et.append("g").selectAll("g").data(c.descendants()).join("g").classed("svg-cell",!0).attr("role","listitem").attr("aria-labelledby",(t,e)=>`depth${t.depth}_idx`+e).attr("transform",t=>t.depth<2||!s?`translate(${t.y0},${t.x0})`:`translate(${t.parent.y1},${t.x0})`),B=(At.filter(t=>0===t.depth).attr("id","root-rect"+ha),At.append("rect").attr("width",t=>t.y1-t.y0).attr("height",t=>t.x1-t.x0).style("display",t=>t.depth<2||!s?"initial":"none").classed("rect",!0).attr("fill",t=>{if(t.depth)for(;1<t.depth;)t=t.parent;return d(t.data.name)}));u&&B.filter(t=>0<t.depth).on("click",pe),B.filter(t=>0===t.depth).attr("tabindex",0).attr("aria-label",`Learning goal widget for ${c.data.name}.
${c.children.length} topic${1<c.children.lenght?"s":""} present.`),na(),B.filter(t=>1===t.depth).on("keydown",(t,e)=>{(t=t||window.event).ctrlKey&&13==t.keyCode&&e.data.link?window.open(e.data.link.replaceAll("\\/","/"),""):13==t.keyCode&&pe(null,e)}),B.filter(t=>2===t.depth).attr("aria-live","polite").attr("aria-labelledby",(t,e)=>`depth${t.depth}_idx`+e);let Et=B.filter(t=>2===t.depth).append("title").attr("class",(t,e)=>`depth${t.depth}_idx`+e).text(t=>`${t.data.name} - Progress ${parseInt(100*z(t))}%.
`+(t.data.link?"External link is available, press control and enter to open it.":"")),Nt=!1,C="",Lt=(B.filter(t=>2===t.depth).on("keydown",function(t,e){(t=t||window.event)?.preventDefault(),!Nt&&t.ctrlKey&&t.shiftKey&&13==t.keyCode?(Nt=!0,Et.filter(t=>2===t.depth&&t==e).text(t=>`The current progress for the learning goal ${t.data.name} is ${t.data.pro}%.
          Please enter now the new value. You can save the changes by pressing ctrl shift enter
          or reject them by pressing ctrl shift delete.`)):!Nt&&t.ctrlKey&&13==t.keyCode&&e.data.link?window.open(e.data.link.replaceAll("\\/","/"),""):Nt&&function(t,e){if(48<=t.keyCode&&t.keyCode<=57)!function(t,e){C+=String.fromCharCode(t.keyCode);t=100<parseInt(C)?`The entered value is ${C}, but it should between 0 and 100,
        please change it. You can press delete to remove the last digit or ctrl shift 
        delete to exit.`:`New value ${C}. Press ctrl shift enter to confirm.`;Et.filter(t=>2===t.depth&&t==e).text(t)}(t,e);else if(t.ctrlKey&&t.shiftKey&&8==t.keyCode)!function(e){Et.filter(t=>2===t.depth&&t===e).text(`Changes aborted. Progress is set to its previous value ${e.data.pro}%.`),setTimeout(()=>{Et.filter(t=>2===t.depth&&t===e).text(t=>`Learning goal ${t.data.name}.
                                  Progress ${parseInt(100*z(t))}%.
                                  `+(t.data.link?"External link is available, press control and enter to open it.":" "))},5e3),C="",Nt=!1}(e);else if(t.ctrlKey&&t.shiftKey&&13==t.keyCode)!function(e){var t=parseInt(C);var a;t<0||100<t?Et.filter(t=>2===t.depth&&t==e).text(`The entered value is ${C}, but it should between 0 and 100,
          please change it. You can press delete to remove the last digit or ctrl shift delete to exit.`):(a=Math.round(100*z(e.parent))/100,e.data.pro=t,Et.filter(t=>2===t.depth&&t==e).text(`Confirmed changes. New progress ${e.data.pro}%.`),setTimeout(()=>{Et.filter(t=>2===t.depth&&t==e).text(t=>`Learning goal ${t.data.name}.
                            Progress ${parseInt(100*z(t))}%.
                            `+(t.data.link?"External link is available, press control and enter to open it.":" "))},5e3),t=la.transition().duration(300).ease(la.easeExp),Ke(t=>2===t.depth&&t===e,t,!1),Lt.filter(t=>2===t.depth&&t==e).transition(t).attr("width",t=>je(t)),Ft.filter(t=>2===t.depth&&t==e).transition(t).attr("x",t=>{var e=Re(t);return 100===t.data.pro?e+1:e}),Jt.filter(t=>2===t.depth&&t==e).transition(t).text(C+"%").attr("x",t=>{var e=Ye(t);return 100===t.data.pro?e+1:e}),t=Math.round(100*z(e.parent))/100,Te(a,t<a?-.01:.01,a,t,e.parent,300),C="",Nt=!1)}(e);else if(8==t.keyCode)C=C.substr(0,C.length-1),Et.filter(t=>2===t.depth&&t==e).text(`New value ${C}. Press ctrl shift enter to confirm or ctrl shift delete to abort.`);else if(9==t.keyCode||t.Tab)C=C.substr(0,C.length-1),Et.filter(t=>2===t.depth&&t==e).text(`Please confirm or reject the changes before moving to another learning goal.
        The entered value is ${C}. Press ctrl shift enter to confirm
        or ctrl shift delete to abort.`),t.preventDefault();else if(t.ctrlKey||t.shiftKey||13==t.keyCode)return;Et.filter(t=>2===t.depth&&t==e).text("You can enter only digits currently. Press control shift delete to exit. The number entered is "+(""!==C?C:"still empty."))}(t,e)}),At.filter(t=>2===t.depth).append("rect").attr("width",t=>s?0:Ma(t)*z(t)).attr("height",t=>ka(t)).attr("y",0).attr("fill-opacity",.6).attr("fill",t=>d(t.parent.data.name)).on("click",u?pe:null));const I=At.append("text").attr("aria-hidden",!0).attr("width",t=>t.y1-t.y0).classed("text-element",!0),P=(I.filter(t=>0===t.depth).classed("vertical-text",!0),I.filter(t=>2===t.depth).classed("text-element-d2"+(s?"-sm":""),!0),I.append("tspan").text(t=>t.data.name).attr("dx",0).attr("x",4).attr("y",t=>(t.depth,ka(t)/2)).attr("fill",t=>T(t,.6,2===t.depth)).classed("maintspan",!0).style("font",t=>Qe(t)+"px sans-serif"));P.filter(t=>1===t.depth).classed("maintspan-d1",!0).attr("x",t=>(Ma(t)-2.5*h)/2),P.filter(t=>0===t.depth).attr("y",t=>ka(t)/2).attr("x",t=>Ma(t)/2).classed("vertical-tspan",!0),P.filter(t=>1===t.depth).call(A,lt-$-3*b,!1,t=>ka(t),b);let Yt=null,Dt=null;P.filter(t=>0===t.depth).each((t,e,a)=>{Dt=a[e].parentNode,Yt=Dt.parentNode}),la.select(Dt).classed("rootText",!0),la.select(Yt).classed("rootNode",!0),Dt.getBBox().height>=Yt.querySelector(".rect").getBBox().height&&(I.filter(t=>0===t.depth).style("letter-spacing","0.3em"),Dt.getBBox().height>=Yt.querySelector(".rect").getBBox().height)&&ye(Dt,Yt,P.filter(t=>0===t.depth)),P.filter(t=>2===t.depth).classed("maintspan-d2",!0).call(xe,.95*ot,!0);Bt=At.filter(t=>2===t.depth).append("g").classed("sliderG",!0);let Rt=Bt.append("g").classed("circleReject",!0),Xt=_e(Rt,"reject",function(){var t=la.transition().duration(200).ease(la.easeLinear),t=(t.end().then(()=>{Kt.style("visibility","hidden"),_t.style("visibility","hidden"),jt.style("visibility","hidden"),Ot.style("visibility","hidden")}).catch(()=>{}),Ft.filter(t=>t===r).transition(t).attr("x",t=>Re(t)),Lt.filter(t=>t===r).transition(t).attr("width",t=>je(t)),Jt.filter(t=>t===r).transition(t).text(r.data.pro+"%").attr("x",t=>Ye(t)),Ke(t=>t===r,t,!1),r.data.pro),e=(r.data.pro=f,Math.round(100*z(r.parent))/100),t=(r.data.pro=t,Math.round(100*z(r.parent))/100),a=t<e?-.01:.01;Te(e,a,e,t,r.parent,200),le=!1,Le(r),setTimeout(()=>{ia=-1,Ie=!1},200)}),jt=Fe(Xt),Ot=He(Xt,"reject"),qt=Bt.append("g").attr("class","circleAccept"),Gt=_e(qt,"accept",Se),Kt=Fe(Gt),_t=He(Gt,"accept"),Ft=Bt.append("svg").attr("aria-label",t=>`Progress slider, current progress ${t.data.pro}%. `+"Press enter and then use the arrow keys to adjust. Press enter when you are done.").attr("x",t=>s?0:t.proY0).attr("y",t=>(ka(t)-N(t))/2).attr("class","slider").attr("width",t=>N(t)).attr("height",t=>N(t)).attr("viewBox","0 0 100 100").attr("fill",t=>d(t.parent.data.name)),Ht=(t=Ft,X?t.on("touchstart",(t,e)=>{var a;t=t,e=e,v&&(xa&&le&&e!==r?Ae():((a=la.select("#"+ha).select("svg").node().createSVGPoint()).x=t.touches.item(0).clientX,t=a.matrixTransform(la.select("#"+ha).select("svg").node().getScreenCTM().inverse()),ia=t.x,r=e,ct=!0))}).on("touchmove",t=>{var d=t;if(v&&ct){d.preventDefault();let o=null,s=null;Ft.filter(t=>t===r).attr("x",(t,e,a)=>{var r=a[e].parentElement.parentElement,n=r.childNodes[0].getBoundingClientRect().right,r=r.childNodes[0].getBoundingClientRect().left;let i=parseFloat(la.select(a[e]).attr("x"));if(d.touches.item(0).clientX>n||d.touches.item(0).clientX<r)return f=d.touches.item(0).clientX>n?100:0,i=d.touches.item(0).clientX<r?0:De(t,-E)+1,s=i;a=la.select("#"+ha).select("svg").node().createSVGPoint();a.x=d.touches.item(0).clientX,o=a.matrixTransform(la.select("#"+ha).select("svg").node().getScreenCTM().inverse());let l=i-ia+o.x;ia=o.x;e=De(t,-E);return(l=l<0?0:l)>e&&(l=e+1),f=parseInt(100*l/e),s=l}),Lt.filter(t=>t===r).attr("width",t=>je(t,f/100)),Jt.filter(t=>t===r).text(f+"%").attr("x",t=>s+g*N(t)/2+E/2),Gt.filter(t=>t===r).attr("x",t=>s-g*N(t)),Xt.filter(t=>t===r).attr("x",t=>s-g*N(t)),ee.filter(t=>t===r.parent).text(t=>{var e=r.data.pro,t=(r.data.pro=f,parseInt(100*z(t))+"%");return r.data.pro=e,t}),Qt.filter(t=>t===r.parent).attr("d",t=>{var e,a=r.data.pro,t=(r.data.pro=f,2*Math.PI*z(t));return r.data.pro=a,t==2*Math.PI?"M 50 50 m 49, 0 a 49,49 0 1,0 -98,0 a 49,49 0 1,0 98,0 ":(a=Math.sin(t),e=Math.cos(t),`M 50 50 v -49 A 49,49 0 ${t>=Math.PI?1:0},1 ${49*a+50} ${49*-e+50} L 50 50 z`)})}}).on("touchend",()=>{v&&ct&&(ct=!1,Math.abs(f-r.data.pro)<.01||(xa?(le=!0,Pe):Se)())}):t.on("mouseenter",(t,e)=>Ne(t,e)).on("mouseleave",(t,e)=>Ne(t,e)).on("mousedown",(t,e)=>{return e=e,(t=t).preventDefault(),void(v&&(ga&&ga.includes(e)&&ya(),xa&&le&&e!==r?Ae():((a=la.select("#"+ha).select("svg").node().createSVGPoint()).x=t.clientX,t=a.matrixTransform(la.select("#"+ha).select("svg").node().getScreenCTM().inverse()),r=e,f=e.data.pro,ct=!0,ht=t.x,et.on("mousemove",t=>{var d=t;if(v&&ct&&r){let o=null,s=null;Ft.filter(t=>t===r).attr("x",(t,e,a)=>{var r=a[e].parentElement.parentElement,n=r.childNodes[0].getBoundingClientRect().right,r=r.childNodes[0].getBoundingClientRect().left;let i=parseFloat(la.select(a[e]).attr("x"));if(d.clientX>n||d.clientX<r)return f=d.clientX>n?100:0,i=d.clientX<r?0:De(t,-E)+1,s=i;a=la.select("#"+ha).select("svg").node().createSVGPoint();a.x=d.clientX,o=a.matrixTransform(la.select("#"+ha).select("svg").node().getScreenCTM().inverse());let l=i-ht+o.x;ht=o.x;e=De(t,-E);return(l=l<0?0:l)>e&&(l=e+1),f=parseInt(100*l/e),s=l}),Lt.filter(t=>t===r).attr("width",t=>je(t,f/100)),Jt.filter(t=>t===r).text(f+"%").attr("x",t=>s+g*N(t)/2+E/2),Gt.filter(t=>t===r).attr("x",t=>s-g*N(t)),Xt.filter(t=>t===r).attr("x",t=>s-g*N(t)),ee.filter(t=>t===r.parent).text(t=>{var e=r.data.pro,t=(r.data.pro=f,parseInt(100*z(t))+"%");return r.data.pro=e,t}),Qt.filter(t=>t===r.parent).attr("d",t=>{var e,a=r.data.pro,t=(r.data.pro=f,2*Math.PI*z(t));return r.data.pro=a,t==2*Math.PI?"M 50 50 m 49, 0 a 49,49 0 1,0 -98,0 a 49,49 0 1,0 98,0 ":(a=Math.sin(t),e=Math.cos(t),`M 50 50 v -49 A 49,49 0 ${t>=Math.PI?1:0},1 ${49*a+50} ${49*-e+50} L 50 50 z`)})}}).on("mouseup",Ce))));var a}),Ft.append("path").attr("d","M 50 50 m 49, 0 a 49,49 0 1,0 -98,0 a 49,49 0 1,0 98,0 ")),Jt=Bt.append("text").text("100%").classed("slider-text",!0).attr("x",t=>s?N(t)/2:t.proY0+N(t)/2).attr("y",t=>ka(t)/2).attr("fill",t=>T(t,1,!1)).style("font",t=>We(t,!0)+"px sans-serif"),Vt=function(){let r=!0;return Jt.each((t,e,a)=>{a[e].getBoundingClientRect().width>=a[e].parentNode.getElementsByClassName("slider")[0].getBoundingClientRect().width&&(r=!1)}),r}(),Wt=(Jt.text(t=>t.data.pro+(Vt?"%":"")),At.filter(t=>1===t.depth).append("g").on("click",pe).attr("transform",t=>`translate(${Ma(t)-$-b},`+` ${ka(t)/2-h})`)),Ut=Wt.append("svg").attr("width",$).attr("height",$).attr("viewBox","0 0 100 100").attr("x",0).style("filter",t=>{t=$a(d(t.data.name));return t.push(.8),`drop-shadow(${nt} ${wa(t)})`}).attr("stroke",t=>ba(d(t.data.name),"black",.8,!0)).classed("base-stroke",!0).attr("fill",t=>{var e=ba(d(t.data.name),"white",.6);return ba(d(t.data.name),e,.4,!0)}),Zt=(Ut.append("path").attr("d","M 50 50 m 49, 0 a 49,49 0 1,0 -98,0 a 49,49 0 1,0 98,0 "),Wt.append("svg").attr("width",$).attr("height",$).attr("x",0).attr("viewBox","0 0 100 100").attr("fill-opacity",1).attr("fill",t=>ba(d(t.data.name),"black",.94,!0))),Qt=Zt.append("path").attr("d",t=>{var e,a,t=2*Math.PI*z(t);return t==2*Math.PI?"M 50 50 m 49, 0 a 49,49 0 1,0 -98,0 a 49,49 0 1,0 98,0 z":(e=Math.sin(t),a=Math.cos(t),`M 50 50 v -49 A 49,49 0 ${t>=Math.PI?1:0},1 ${49*e+50} ${49*-a+50} z`)}),te=Wt.append("svg").attr("x",h-at).attr("y",h-at).attr("width",rt).attr("height",rt).attr("viewBox","0 0 100 100").attr("stroke",t=>ba(d(t.data.name),"black",.8,!0)).classed("base-stroke",!0).attr("fill",t=>ba(d(t.data.name),"white",.6,!0)),ee=(te.append("path").classed("topic-prog-text-svg",!0).attr("d","M 50 50 m 48, 0 a 48,48 0 1,0 -96,0 a 48,48 0 1,0 96,0 "),Wt.append("text").attr("aria-hidden",!0).style("transform-origin",$+"px 0px").text(t=>parseInt(100*z(t))+"%").attr("y",h).attr("x",h).attr("fill",t=>T(t,.6,!1)).classed("topic-prog-text",!0).style("font",rt/2.7+"px sans-serif")),ae=At.filter(t=>1<=t.depth&&t.data.link).append("g").attr("class","linkContainerG").attr("width",t=>t.depth<2||!s?st:1).attr("height",t=>t.depth<2||!s?st:1).on("mouseenter",(t,e)=>ue(e,ae,!0)).on("mouseleave",(t,e)=>ue(e,ae,!1)).on("click",(t,e)=>window.open(e.data.link?e.data.link.replaceAll("\\/","/"):"https://www.know-center.tugraz.at/en/","_blank")),re=$e(!1),ne=(re.attr("aria-label",t=>"Open link of "+t.data.name).style("filter",t=>{t=$a(d((1===t.depth?t:t.parent).data.name));return t.push(.8),`drop-shadow(${nt} ${wa(t)})`}),re.append("path").attr("d","M0,0h"+(Ct=st)+"a"+Ct+","+Ct+" 0 0 1 "+-Ct+","+Ct+"z"),$e(!0)),ie=(ne.append("path").attr("d","M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"),ne.append("path").attr("d","M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"),At.filter(t=>1===t.depth).append("g").on("click",pe).attr("cursor","zoom-out").append("svg").attr("width",0).attr("height",0).attr("viewBox","0 0 100 100").attr("x",0).attr("y",0).attr("stroke",t=>T(t,.7,!0)).classed("back-arrow",!0)),le=(ie.append("path").attr("d","M 90,50 l -80,0 l 20,-20 M 10, 50 l 20, 20"),u&&ta(),!1),oe=la.select("#"+ha).append("div").style("max-width",l+"px").classed("blur-div",!0).classed("mainDiv",!0);e=oe.append("svg").attr("aria-labelledby","visualization-title").attr("aria-describedby","visualization-desc").attr("height",o).attr("width",l).classed("accessibility-svg",!0).attr("viewBox",[0,0,l,o]);let se=e.append("circle").attr("filter",`drop-shadow(${nt} rgba(0,0,0,0.5))`).attr("cx",(l-p)/2+p).attr("cy",x+n/2).attr("r",i).attr("cursor","pointer").attr("fill",`url(#gradient-${ha})`).on("click",Ve);e.append("svg").attr("x",(l-p-n)/2+p).attr("y",x).attr("width",n).attr("height",n).attr("viewBox","0 0 30 30").classed("accessibility-close-icon",!0).append("path").attr("d",tt).on("click",Ve);k=[{data:pa}],t=Math.max(Mt/19,14);let de=20+(14===t?17:t+2)*oe.append("div").style("text-align","center").style("max-width",l+"px").style("height",o+"px").style("top","0").style("position","absolute").selectAll(null).data(k).join("p").style("margin-inline",100*(2*n+(l-p)/2)/l+"%").attr("id","accessibility-dialog").attr("tabindex",1).html(t=>t.data).style("font",t+"px sans-serif")._groups[0][0].children.length,S=(oe.attr("height",de+2*i),e.attr("height",de+2*i+10).attr("viewBox",`0 0 ${l} `+(de+2*i+10)),null),ce=null,he=null;function pe(t,e){if(t?.preventDefault(),!K)if(!v&&ga&&ga.includes(e)&&ya(),2===e.depth&&(e=e.parent),S=e,le)Ae();else{et.attr("viewBox",[0,0,l,v?o:Y]),K=!0,focus=focus===e?e=e.parent:e;const n=v?o:Y;c.each(t=>{!v&&s&&1===t.depth?t.target={x0:(t.x0-e.x0)/(e.x1-e.x0)*n,x1:(t.x1-e.x0)/(e.x1-e.x0)*n,y0:t.y0-e.y0,y1:v?t.y1-e.y0:t.parent.y1}:!v&&s&&2===t.depth?t.target={x0:(t.x0-e.x0)/(e.x1-e.x0)*n,x1:(t.x1-e.x0)/(e.x1-e.x0)*n,y0:v?t.y0-e.y0:it.parent.y1,y1:t.y1-e.y0}:t.target={x0:(t.x0-e.x0)/(e.x1-e.x0)*n,x1:(t.x1-e.x0)/(e.x1-e.x0)*n,y0:t.y0-e.y0,y1:t.y1-e.y0}}),v&&s&&c.each(t=>{2===t.depth&&(t.target.y0=u?u.y1:t.target.y0,t.target.y1=t.target.y0)});t=At.transition().duration(_).attr("transform",t=>`translate(${t.target.y0},${t.target.x0})`);s&&(v?(he.classed("visible",!1),I.filter(t=>t===S).text("").append(()=>ce.node()),I.filter(t=>t===S).classed("text-element-clicked",!0).transition().duration(_).attr("y",t=>ka(t)/2).attr("x",4).style("font",t=>Qe(t)+"px sans-serif").end().then(()=>P.filter(t=>t===S).attr("opacity",1).attr("fill-opacity",1)).catch(()=>{}),he=null,ce=null):(B.filter(t=>2===t.depth).style("display","initial"),(ce=P.filter(t=>t===S).classed("invisible",!0)).remove(),he=I.filter(t=>t===S).append("tspan").text(t=>t.data.name).attr("y",0).attr("x",0).attr("fill",t=>T(t,.6,2===t.depth)).style("font",t=>Ma(t.target)/2+"px sans-serif").classed("added-topic-zoomed",!0),I.filter(t=>t===S).classed("text-element-clicked",!1),setTimeout(()=>{!function(){let r=null,n=null;he.each((t,e,a)=>{n=a[e],r=n.parentNode.parentNode});const e=S;for(let t=.2;0<t;t-=.1){if(!(n.getBBox().height+60>=r.querySelector(".rect").getBBox().height))return;I.filter(t=>t===e).style("letter-spacing",t+"em")}let t=parseFloat(I.filter(t=>t===S).style("font").split("p")[0]);var a=t;for(;17<t&&n.getBBox().height+60>=r.querySelector(".rect").getBBox().height;)t=parseFloat(la.select(n).style("font").split("p")[0]),la.select(n).style("font",a-V+"px sans-serif");if(!(n.getBBox().height+60<r.querySelector(".rect").getBBox().height)){let t=he.html();for(;n.getBBox().height+60>=r.querySelector(".rect").getBBox().height;)if(t=t.substring(0,t.length-1),he.html(t+sa),t.length<1)return}}(),he.filter(t=>t===S).attr("x",t=>Ma(t.target)/2).attr("y",(t,e,a)=>ka(t.target)/2-a[e].getBBox().width/2+30),he.classed("visible",!0)},_)),ge(re.filter(t=>t===S),t,!1,!v),ge(ne.filter(t=>t===S),t,!0,!v),ie.filter(t=>t===S).transition(t).attr("width",t=>v?0:.8*Ma(t.target)).attr("height",t=>v?0:.8*Ma(t.target)).attr("x",t=>v?0:.1*Ma(t.target))),v?(B.filter(t=>0===t.depth).attr("tabindex",0),B.filter(t=>2===t.depth).attr("tabindex",null),na()):(B.filter(t=>2===t.depth&&t.parent===e).attr("tabindex",0),B.filter(t=>0===t.depth).attr("tabindex",null),B.filter(t=>1===t.depth&&t!==e).attr("tabindex",null),B.filter(t=>1===t.depth&&t===e).attr("aria-label",t=>{let e=`Topic ${t.data.name}. Progress ${parseInt(100*z(t))}%.`;return"children"in t&&(e+=`${t.children.length} learning goal${1<t.children.length?"s":""}, `+"press enter to go back to the topic view. Use tab to navigate through it."),e+=t.data.link?"External link is available, press control and enter to open it.":" "})),B.transition(t).attr("height",t=>v?t.x1-t.x0:ka(t.target)).attr("width",t=>v?t.depth<2||!s?t.y1-t.y0:0:Ma(t.target)),ge(re.filter(t=>2===t.depth),t,!1,v),ge(ne.filter(t=>2===t.depth),t,!0,v),Lt.transition(t).attr("y",t=>v?0:ka(t.target)-Ze(t)).attr("height",t=>Ze(t)).attr("width",t=>{var e;return v&&s?0:(e=z(t),v?Ma(t)*e:!v&&s?je(t,e):je(t))}),a=t,Wt.transition(a).attr("transform",t=>{var e=Ma(t.target),a=ka(t.target);return v&&!s?`translate(${e-$-b}, ${a/2-h})`:v&&s?`translate(${Ma(t)-$-b}, ${ka(t)/2-h})`:!v&&s?`translate(${(l-p)/2+p-L()*$/2},
              ${o/2-L()*h})`:`translate(${e/2-(L()+1)*h},
        ${a-4*L()*h})`}),Ut.transition(a).attr("x",s||v?0:h).attr("width",v?$:L()*$).attr("height",v?$:L()*$),Zt.transition(a).attr("x",s||v?0:h).attr("width",v?$:L()*$).attr("height",v?$:L()*$),te.transition(a).attr("width",v?rt:L()*rt).attr("height",v?rt:L()*rt).attr("x",()=>v?h-at:!v&&s?L()*(h-at):L()*(h-at)+h).attr("y",v?h-at:L()*(h-at)),ee.transition(a).style("font",(v?1:L())*rt/2.7+"px sans-serif").attr("y",v?h:L()*h).attr("x",()=>v?h:!v&&s?L()*h:(1+L())*h);const i=v;_;var a=la.transition().duration(750),r=(Ke(()=>!0,a,v),t=>i?N(t):g*N(t));Ft.attr("cursor",v?"":"pointer").transition(a).attr("x",t=>{var e;return i?s?0:t.proY0:(e=Re(t),100===t.data.pro?e+1:e)}).attr("y",t=>i?(ka(t)-N(t))/2:Xe(t,!0)).attr("width",r).attr("height",r),Jt.style("dominant-baseline",v?"central":"auto").text(t=>t.data.pro+(!i||Ue(t)?"%":"")).transition(a).style("font",t=>We(t,i)+"px sans-serif").attr("x",t=>{var e;return i?s?N(t)/2:t.proY0+N(t)/2:(e=Ye(t),100===t.data.pro?e+1:e)}).attr("y",t=>i?ka(t)/2:ka(t.target)-4.5),Ht.transition(t).attr("d",v?"M 50 50 m 49, 0 a 49,49 0 1,0 -98,0 a 49,49 0 1,0 98,0":"M 50 100 m 49, 0 a 49,49 0 1,0 -98,0 a 49,49 0 1,0 98,0"),v=!v,P.filter(t=>0<t.depth).classed("invisible",!0).style("font",t=>Qe(t)+"px sans-serif"),P.filter(t=>0<t.depth).transition("reduceWidth").duration(_).attr("width",t=>t.target.y1-t.target.y0).end().then(()=>{I.filter(t=>2===t.depth).style("display","initial"),ta(),v?s?(P.filter(t=>2===t.depth).classed("invisible",!1),P.filter(t=>2===t.depth).call(A,Ma(u.target)-2*b,!1,t=>Xe(t,!0)-g*N(t)/4,b),P.filter(t=>1===t.depth).call(A,lt-2*b,!1,t=>ka(t.target)-4*L()*h,b)):(P.filter(t=>2===t.depth).call(A,ot-2*b,!1,t=>Xe(t,!0)+g*N(t)/4,b),P.filter(t=>1===t.depth).call(A,lt-2*b,!1,t=>ka(t.target)-4*L()*h,b)):(P.filter(t=>2===t.depth).call(xe,.95*ot,!0),P.filter(t=>1===t.depth).call(A,lt-$-3*b,!1,t=>ka(t.target),b)),s?(P.filter(t=>1===t.depth).classed("invisible",!1),setTimeout(()=>{K=!1},100),v&&(P.filter(t=>2===t.depth).classed("invisible",!1),setTimeout(()=>{K=!1},100))):(P.filter(t=>0<t.depth).classed("invisible",!1),setTimeout(()=>{K=!1},100))}).catch(()=>{}),v||P.filter(t=>2===t.depth).transition("resetChild2Align").duration(_).attr("y",t=>ka(t.target)/2),P.filter(t=>0===t.depth).transition("resetTitlePos").duration(_).attr("y",t=>ka(t.target)/2)}}function T(t,e,a){var t=$a(d((2===t.depth?t.parent:t).data.name)),r=ba(t,"white",e),t=ba(t,r,e),e=va(r),r=va(t),t=va([0,0,0]),n=va([240,240,240]),i=ma(n,e),e=ma(e,t),n=ma(n,r),r=ma(r,t);return a?r<n?"rgb(240, 240, 240)":"black":e<i?"rgb(240, 240, 240)":"black"}function ue(e,t,a){K||!t||a&&F||!a&&!F||H||(a&&(F=!0),H=!0,t=At.transition().duration(300),fe(re.filter(t=>t===e),a?1.2*st:st,t),fe(ne.filter(t=>t===e),a?1.2*dt:dt,t).end().then(()=>{H=!1,a||(F=!1)}).catch(()=>{}))}function fe(t,e,a){return t.transition(a).attr("width",e).attr("height",e)}function z(t){if("pro"in t.data)return t.data.pro/100;let e=0;return t.data.children.forEach(t=>{e+=t.pro}),t.data.children.length?e/t.data.children.length/100:0}function ge(t,e,a,r){var n=a?dt:st,a=a?23:st;t.transition(e).attr("width",r?1e-4:n).attr("height",r?1e-4:n).attr("viewBox",`0 0 ${a} `+a)}function xe(t,i,l=!1){t.each(function(){var t=la.select(this),e=t.data()[0].data.name.split(/\s+/),a=t.attr("x"),r=t.text(null).append("tspan").attr("x",a).attr("dy","0em"),a=t.data()[0].depth;r.text(e.join(" "));let n=l?i:a<2?2.3*i:1.35*i;for(r.node().getComputedTextLength()>n&&(e.pop(),e.push(" ..."),r.text(e.join(" ")));r.node().getComputedTextLength()>n;)e.pop(),e.pop(),e.push(" ..."),r.text(e.join(" "))})}function ye(t,e,a,r=0){let n=da;for(;t.getBBox().height+2*r>=e.querySelector(".rect").getBBox().height&&(n=n.substring(0,n.length-1),a.html(n+sa),!(n.length<1)););}function A(t,u,f,g,x=0,e=0){let y=!1,m=0;t.each(function(){for(var t,e,a=la.select(this),r=a.data()[0],n=[],i=a.text(null).append("tspan").attr("text-anchor","middle").attr("x",0).attr("dx",0),l=[],o=a._groups[0][0],s=g(r),{lineHeight:d,words:c,currentWidth:h}=(m=r.depth,function(t,e,a){let r=e.data.name.split(/\s+/).reverse().filter(t=>t),n=Qe(e),i=a;t&&(n/=4+(1===e.depth?25:8),0===e.depth?(i=1,r=e.data.name.split("").reverse()):1===e.depth?i*=.4:i*=.8);return{lineHeight:n,words:r,currentWidth:i}}(f,r,u));t=c.pop();)if(n.push(t),l.push(t),i.html(n.join(" ")),!v&&1===r.depth&&i.node().getComputedTextLength()>lt-$-1.5*b&&1===n.length)y=!0;else if(i.node().getComputedTextLength()>h&&1<n.length){if(n.pop(),o.getBoundingClientRect().height+2*d>s){n.pop(),n.push(sa),i.html(n.join(" "));break}i.text(n.join(" ")),n=[t],i=a.append("tspan").attr("dy",d+"px").attr("text-anchor","middle").attr("x",0).html(t)}a.attr("y",(s-d*(a.node().childNodes.length-1.5))/2);let p=!1;for(e of a.node().childNodes)la.select(e).attr("x",x+u/2),(1===r.depth&&e.getComputedTextLength()>u+1.5*b||e.getBBox().height>B.filter(t=>t===r).node().getBBox().height)&&!W?(U=!1,ve()):1===r.depth&&e.getComputedTextLength()>u+1.5*b?U=!1:la.select(e).html()!==String.fromCharCode(oa)&&(p=!0);1!==r.depth||p||W||ra().then(()=>{U=!1,ve()}).catch(()=>{})}),1===m&&y&&e<50?(a-=V,P.style("font",t=>Qe(t)+"px sans-serif"),A(t,u,f,g,x,e+1)):U&&W&&be()}function me(t){Pt.attr("cursor",W?"pointer":"default").on("click",W?aa:null),St.attr("fill",W?`url(#gradient-${ha})`:"#ababab"),W=t}function ve(){me(!0)}function be(){me(!1)}function $e(e){let a=e?dt:st;var t=e?23:st;return ae.append("svg").attr("width",t=>1===t.depth?a:1e-4).attr("height",t=>1===t.depth?a:1e-4).attr("viewBox",`0 0 ${t} `+t).attr("x",e?1:0).attr("y",e?1:0).classed("linkIconSvg",e).attr("stroke-opacity",t=>"white"===T(t,.7,!0)?1:.5).attr("stroke",t=>e?T(t,.7,!0):"none").classed(e?"svg-element-icon":"svg-element",!0).attr("fill",t=>e?"none":d((1<t.depth?t.parent:t).data.name))}let we=!1;function Me(t){t.preventDefault(),s||kt.transition().duration(100).attr("fill","#fefefe").end().then(()=>kt.transition().duration(100).attr("fill",`url(#gradient-${ha})`)).catch(()=>{});let e=0;(we?(e=w,$t.transition().ease(la.easeExp).duration(t=>500+100*t.index).attr("d",ke(M,w,e,w,y)),wt.transition().ease(la.easeExp).duration(t=>500+100*t.parentIndex).attr("x",(M-m)/2).end().then(()=>{bt.transition().ease(la.easeExp).duration(t=>500+100*t.index).attr("y",x+n/2-w/2).attr("x",(l-p-M)/2+p)})):(e=M,bt.transition().ease(la.easeBack).duration(t=>1e3+100*t.index).attr("y",t=>xt?x+2*i+(w+10)*(t.index%Math.ceil(O.length/2)):x+2*i+(w+10)*t.index).attr("x",t=>xt?t.index<Math.ceil(O.length/2)?(l-p)/4+p-M/2:3*(l-p)/4+p-M/2:(l-p-M)/2+p).end().then(()=>{$t.transition().ease(la.easeExp).duration(t=>500+100*t.index).attr("d",ke(M,w,e,w,y)),wt.transition().ease(la.easeExp).duration(t=>500+100*t.parentIndex).attr("x",t=>y+t.index*m)}))).catch(()=>{}),we=!we}function ke(t,e,a,r,n){return`M ${t/2},${(e-r)/2}
h ${a/2-n}
a ${n} ${n} 0 0 1 ${n} ${n}
v ${r-2*n}
a ${n} ${n} 0 0 1 ${-n} ${n}
h ${-(a-2*n)}
a ${n} ${n} 0 0 1 ${-n} ${-n}
v ${-(r-2*n)}
a ${n} ${n} 0 0 1 ${n} ${-n} z`}function Be(t,e,a,r,n){t.append("path").attr("d",`M ${e},${a} A ${r} ${r} 0 1 0 ${e} ${a+2*r} `+`A ${r} ${r} 0 1 0 ${e} ${a} Z M ${e} ${a+r/n} `+`A ${r/n} ${r/n} 0 1 1 ${e} ${a+3*r/n} `+`A ${r/n} ${r/n} 0 1 1 ${e} ${a+r/n} Z`)}let E=u?N(u)/3.6:1;function Ce(){v&&ct&&(ct=!1,Math.abs(f-r.data.pro)<.01||(et.on("mousemove",null).on("mouseup",null),(xa?(le=!0,Pe):Se)()))}let Ie=!1;function Pe(){Ie=!0;var t=la.transition().duration(400).ease(la.easeBack);jt.filter(t=>t===r).transition(t).style("visibility","visible").attr("cy",t=>g*N(t)/2).attr("cx",t=>g*N(t)),Ot.filter(t=>t===r).transition(t).style("visibility","visible").attr("y",t=>g*N(t)/2-pt/2).attr("x",t=>g*N(t)-pt/2),Kt.filter(t=>t===r).transition(t).style("visibility","visible").attr("cy",t=>g*N(t)/2).attr("cx",t=>2*g*N(t)+E),_t.filter(t=>t===r).transition(t).style("visibility","visible").attr("x",t=>2*g*N(t)+E-pt/2).attr("y",t=>g*N(t)/2-pt/2)}function Se(){r.data.pro=f,null!==fa&&fa(this,r,f);var t=la.transition().duration(200).ease(la.easeBack);t.end().then(()=>{Kt.style("visibility","hidden"),_t.style("visibility","hidden"),jt.style("visibility","hidden"),Ot.style("visibility","hidden")}).catch(()=>{}),Ke(t=>t===r,t,!1),le=!1,Le(r),setTimeout(()=>{ia=-1,f=null,Ie=!1},500)}function Te(t,e,a,r,n,i){let l=Math.round(100*t)/100;ee.filter(t=>t===n).transition().duration(i/(100*Math.abs(r-a))).text(parseInt(100*l)+"%"),Qt.filter(t=>t===n).transition().duration(i/(100*Math.abs(r-a))).attr("d",()=>{var t,e,a=2*Math.PI*l;return a==2*Math.PI?"M 50 50 m 49, 0 a 49,49 0 1,0 -98,0 a 49,49 0 1,0 98,0 z":(t=Math.sin(a),e=Math.cos(a),`M 50 50 v -49 A 49,49 0 ${a>=Math.PI?1:0},1 ${49*t+50} ${49*-e+50} z`)}).end().then(()=>{if(Math.round(100*Math.abs(l-r))/100!=0)return Te(null===t?null:t+e,e,a,r,n,i);f=null,ht=null,le=!1}).catch(()=>{})}let ze=!1;function Ae(){if(!ze){if(ze=!0,!le)throw new Error("No dialog is open, what is going on");Ee(qt.filter(t=>t===r),1,4),Ee(Rt.filter(t=>t===r),-1,4,!0)}}function Ee(t,e,a,r=!1){var n=la.transition().duration(50);return!a&&r?t.transition(n).attr("transform","").end().then(()=>{ze=!1}).catch(()=>{}):a?t.transition(n).attr("transform",`translate(${+e},0)`).end().then(()=>Ee(t,-1*e,a-1,r)):t.transition(n).attr("transform","")}function Ne(t,e){if(!(!v||le||ct||Ie||K)){let n="mouseenter"===t.type,i=0;Ft.filter(t=>t===e).transition().duration(300).attr("x",e=>{var a=Ma(e.target);if(n){let t=Re(e)-E/2;var r=t+g*N(e)+E;return t<0?(i=t,t=0):a<r&&(i=r-a-1,t-=i),t}r=Re(e);return 100===e.data.pro?r+1:r}).attr("y",t=>n?Xe(t,!0,E):Xe(t,!0)).attr("width",t=>n?g*N(t)+E:g*N(t)).attr("height",t=>n?g*N(t)+E:g*N(t)),Jt.filter(t=>t===e).transition().duration(300).attr("x",(t,e,a)=>n?parseFloat(la.select(a[e]).attr("x"))-i:Ye(t))}}function Le(e){v&&(le?Ae():(Ft.filter(t=>t===e).transition().duration(300).attr("x",t=>Re(t)).attr("y",t=>Xe(t,!0)).attr("width",t=>g*N(t)).attr("height",t=>g*N(t)),Jt.filter(t=>t===e).transition().duration(300).attr("x",t=>Ye(t))))}function Ye(t){return Re(t)+g*N(t)/2}function De(t,e=0){return s&&!X||s?Ma(t.target)-g*N(t)+e:Ma(t)-g*N(t)+e}function Re(t,e=1){return De(t,e)*t.data.pro/100}function Xe(t,e=!1,a=0){return ka(e?t.target:t)-g*N(t)-a}function je(t,e=null){return.9<=(e=null===e?t.data.pro/100:e)?Ma(X&&-1===ia?t:t.target)*(e-.05):e<.05&&0<e?Ma(X&&-1===ia?t:t.target)*(e+.05):Ma(X&&-1===ia?t:t.target)*e}function N(t){return s?Math.min(t.proY1-t.proY0,40):Math.min(t.proY1-t.proY0,56)}function L(){return!v&&s?1.5*(l-p)/((100<2*$?100/$:2)*$):100<2*$?100/$:2}function Oe(t,e){return t.attr("width",t=>e?N(t):3*g*N(t)).attr("height",t=>e?N(t):g*N(t)).attr("x",t=>e?t.proY0:Re(t)-g*N(t)).attr("y",t=>e?(ka(t)-N(t))/2:ka(t.target)-g*N(t))}function qe(t,e){return t.attr("cx",t=>e?pt/2:3*g*N(t)/2).attr("cy",t=>e?pt/2:(g-.5)*N(t))}function Ge(t,e){return t.attr("x",t=>e?0:(3*g*N(t)-pt)/2).attr("y",t=>e?0:(g-.5)*N(t)-pt/2)}function Ke(e,t,a){Oe(Gt.filter(t=>e(t)).transition(t),a),Oe(Xt.filter(t=>e(t)).transition(t),a),qe(Kt.filter(t=>e(t)).transition(t),a),qe(jt.filter(t=>e(t)).transition(t),a),Ge(_t.filter(t=>e(t)).transition(t),a),Ge(Ot.filter(t=>e(t)).transition(t),a)}function _e(t,e,a){return Oe(t.append("svg"),!0).attr("aria-label",e).attr("cursor","pointer").attr("fill",t=>d(t.parent.data.name)).on("click",a)}function Fe(t){return qe(t.append("circle"),!0).attr("r",ut).style("visibility","hidden")}function He(t,e){t=Ge(t.append("svg"),!0).attr("viewBox","0 0 32 32").attr("width",pt).attr("height",pt).attr("stroke",t=>T(t,1,!1)).classed("slider-circle",!0);return t.append("path").attr("d","reject"===e?tt:"M2,18 L11,27 L30,5"),t}let Je=!1;function Ve(t){t.preventDefault(),s||Je?s||se.transition("blur2-"+ha).duration(100).attr("fill","#fefefe").end().then(()=>se.transition().duration(100).attr("fill",`url(#gradient-${ha})`)).catch(()=>{}):zt.transition("blur-"+ha).duration(100).attr("fill","#fefefe").end().then(()=>zt.transition().duration(100).attr("fill",`url(#gradient-${ha})`)).catch(()=>{}),Tt.transition("transform-"+ha).duration(700).ease(la.easePolyInOut.exponent(4)).attr("transform",Je?"translate(0,0)":"translate(0, -200px)"),Je||oe.style("z-index",50),oe.transition("changeTop-"+ha).duration(700).ease(la.easePolyInOut.exponent(4)).style("top",`${Je?-de-2*i:0}%`).end().then(()=>{Je||oe.style("z-index",-1)}).catch(()=>{}),Je=!Je}function We(t,e){if(!e)return g*N(t)/3.5;let a=Ue(t)?J:(t.proX1-t.proX0)*R;e=N(t);return a=a>e?e/2:a}function Ue(t){return!s&&J<(t.proX1-t.proX0)*R}function Ze(t){return v?ka(t.target):s&&D?.8*Math.min(ka(t.target),12):s?Math.min(ka(t.target),12):Math.min(ka(t),14)}function Qe(t){return s?v&&0===t.depth?Math.min(ka(t.children[0].target)/6,17.0185)+a:v&&1===t.depth?Math.min(ka(t.target)/6,17.0185)+a+5:v?Math.min(ka(t.target)-.5,12.6302)+a+3:0===t.depth?Ma(t.target??t)/2+a+5:1===t.depth?Math.min(ka(t.target??t)/6,17.0185)+a+5:Math.min(ka(t.target??t)-.5,12.6302)+a+3:v&&0===t.depth?Math.min(ka(t.children[0].target)/6,20.0185)+a:v&&1===t.depth?Math.min(ka(t.target)/6,25.0185)+a:v?Math.min(ka(t.target)-.5,20.6302)+a+5:0===t.depth?Ma(t)/2+a:1===t.depth?Math.min(ka(t)/6,20.0185)+a:Math.min(ka(t)-.5,11.6302)+a+5}function ta(){var t=v?"zoom-out":"zoom-in";Wt.attr("cursor",t),Lt.attr("cursor",t),B.filter(t=>0<t.depth).attr("cursor",t)}function ea(){P.style("font",t=>Qe(t)+"px sans-serif"),v&&s?(P.filter(t=>2===t.depth).call(A,Ma(u.target)-2*b,!1,t=>Xe(t,!0)+g*N(t)/4,b),P.filter(t=>1===t.depth).call(A,lt-2*b,!1,t=>ka(t.target)-4*L()*h,b)):v?(P.filter(t=>2===t.depth).call(A,ot-2*b,!1,()=>Xe(u,!0)+g*N(u)/4,b),P.filter(t=>1===t.depth).call(A,lt-2*b,!1,t=>ka(t.target)-4*L()*h,b)):(P.filter(t=>1===t.depth).call(A,lt-$-3*b,!1,t=>ka(t),b),P.filter(t=>2===t.depth).call(xe,.95*ot,!0)),P.filter(t=>0===t.depth).text(da),I.filter(t=>0===t.depth).style("letter-spacing","1em"),Dt.getBBox().height>=Yt.querySelector(".rect").getBBox().height&&(I.filter(t=>0===t.depth).style("letter-spacing","0.3em"),Dt.getBBox().height>=Yt.querySelector(".rect").getBBox().height)&&ye(Dt,Yt,P.filter(t=>0===t.depth))}function aa(t){t.preventDefault(),a+=V,s?ea():St.transition().duration(100).attr("fill","#fefefe").end().then(()=>St.transition().duration(100).attr("fill",`url(#gradient-${ha})`).end().then(()=>ea()).catch(()=>{})).catch(()=>{})}async function ra(t){t.preventDefault(),a-=V,s||It.transition().duration(100).attr("fill","#fefefe").end().then(()=>It.transition().duration(100).attr("fill",`url(#gradient-${ha})`)).catch(()=>{}),ea(),W&&be()}function na(){B.filter(t=>1===t.depth).attr("tabindex",0).attr("aria-label",t=>{let e=`Topic ${t.data.name}. Progress ${parseInt(100*z(t))}%.`;return"children"in t&&(e+=`${t.children.length} learning goal${1<t.children.length?"s":""}, press enter to expand the list.
                     Use tab to navigate through it.`),e+=t.data.link?"External link is available, press control and enter to open it.":" "})}let ia=-1}function ya(){la.select("#"+ha).selectAll(".rect").filter(t=>ga.includes(t)).attr("class","rect"),la.select("#"+ha).selectAll(".prog-bar").filter(t=>ga.includes(t)).attr("class","prog-bar"),ga=null}async function l(){await r();var e=la.select("#"+ha).selectAll(".mainSvg");for(let t=0;t<e._groups[0].length-1;t++)la.select("#"+ha).select(".mainSvg").remove();var a=la.select("#"+ha).selectAll(".mainDiv");for(let t=0;t<a._groups[0].length-1;t++)la.select("#"+ha).select(".mainDiv").remove()}function ma(t,e){return(t+.05)/(e+.05)}function va(t){let a=[0,0,0];return t.forEach((t,e)=>{t/=255;a[e]=t<=.03928?t/12.92:((.055+t)/1.055)**2.4}),.2126*a[0]+.7152*a[1]+.0722*a[2]}function ba(t,a,r,e=!1){var n,i=t;if("string"==typeof a&&(a.includes("rgb")||a.includes("#"))?a=$a(a):"string"==typeof a&&0===a.localeCompare("black")?a=[0,0,0]:"string"==typeof a&&0===a.localeCompare("white")&&(a=[255,255,255]),void 0===(r=(t.includes("rgb")||t.includes("#"))&&(t=(n=$a(t)).slice(0,3),4===n.length)?n[3]:r))throw new Error("Alpha is undefined for color "+i);let l=[0,0,0];return t.forEach((t,e)=>{l[e]=(1-r)*a[e]+r*t}),e?wa(l):l}function $a(t){var e,a,r=[0,0,0];return-1!==t.indexOf("#")?(a=2==(e=(t.length-1)/3)?1:2,r[0]=parseInt(t.slice(1,1+e).repeat(a),16),r[1]=parseInt(t.slice(1+e,2*e+1).repeat(a),16),r[2]=parseInt(t.slice(2*e+1,3*e+1).repeat(a),16),r):t.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(",")}function wa(a){let r=3===a.length?"rgb(":"rgba(";return a.forEach((t,e)=>{r+=(3===e?parseFloat:parseInt)(t),e!==a.length-1&&(r+=", ")}),r+")"}function Ma(t){return t?t.y1-t.y0-Math.min(1,(t.y1-t.y0)/2):null}function ka(t){return t?t.x1-t.x0-Math.min(1,(t.x1-t.x0)/2):null}e.setupTreemap=(t,e,a="treemap-1",r="No text found",n,i)=>{la=e,ca=t,ua=t,ha=a,pa=r,xa=n,fa=i,window.onresize=l},e.setupSvg=l});
//# sourceMappingURL=treemap_module.min.js.map